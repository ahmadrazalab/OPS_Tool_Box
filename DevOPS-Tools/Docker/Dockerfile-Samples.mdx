### ğŸ³ Sample Dockerfile - 1

```dockerfile
# ğŸ› ï¸ Use an official base image (e.g., Ubuntu 20.04)
FROM ubuntu:20.04

# ğŸŒ Set environment variables
ENV MY_ENV_VAR=value

# ğŸ“¦ Install system packages and dependencies
RUN apt-get update && \
    apt-get install -y package1 package2 && \
    apt-get clean

# ğŸ“‚ Copy files or directories from the host to the image
COPY ./local-files /app/

# ğŸ¢ Set the working directory for subsequent commands
WORKDIR /var/www/html

# ğŸŒ Expose a port on the container
EXPOSE 80

# ğŸƒ Define a default command to run when the container starts
CMD ["./start.sh"]

# ğŸš€ Start nginx when the container runs
CMD ["nginx", "-g", "daemon off;"]

# ğŸ—ï¸ Define an entry point for the container
ENTRYPOINT ["/entrypoint.sh"]

# ğŸ©º Define a healthcheck command
HEALTHCHECK CMD curl -f http://localhost/ || exit 1

# ğŸ·ï¸ Add metadata to the image
LABEL version="1.0" maintainer="Your Name <your.email@example.com>"

# ğŸ’¾ Specify a volume that can be mounted by the container
VOLUME ["/data"]

# ğŸ‘¤ Create a new user with specific user and group IDs
RUN groupadd -r mygroup && \
    useradd -r -g mygroup myuser

# ğŸš« Switch to a non-root user
USER myuser

# ğŸŒ Copy files from a remote URL to the image
ADD http://example.com/file.tar.gz /tmp/

# ğŸ§¹ Remove temporary files and clean up
RUN rm -rf /tmp/*

# ğŸ’» Execute a shell command during build
SHELL ["/bin/bash", "-c"]

# âš™ï¸ Set a build-time ARG (can be passed during the build)
ARG MY_ARG=value

# ğŸ“‚ Create a mount point for a named volume
VOLUME /myvolume

# ğŸ“£ Set the shell form of ENTRYPOINT
ENTRYPOINT echo "Hello, World!"

# ğŸ—ï¸ Use multi-stage builds
FROM builder AS intermediate
RUN build-something

# ğŸ“¤ Copy artifacts from the intermediate stage
COPY --from=intermediate /app/artifacts /final/

# ğŸ‘¥ Define the default user for the image
USER nobody:nogroup
```

---

### ğŸ³ Sample Dockerfile - 2

```dockerfile
# ğŸ› ï¸ Use Amazon Linux 2 base image
FROM amazonlinux:2

# ğŸ“¦ Update repositories and install PHP from Amazon Linux Extras
RUN amazon-linux-extras enable php8.2 && \
    yum install -y php php-cli php-common php-json php-mbstring php-pdo php-mysqlnd php-opcache php-xml php-gd php-curl php-zip

# ğŸ“¦ Install Apache and other dependencies
RUN yum update -y && \
    yum install -y httpd curl zip unzip \
        libpng-devel zlib-devel libxml2-devel libzip-devel libonig-devel && \
    yum clean all

# ğŸ¼ Install Composer
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer

# ğŸ“¦ Enable PHP and install PHP, Apache, and necessary development tools for Kafka
RUN amazon-linux-extras enable php8.2 && \
    yum install -y php php-cli php-common php-json php-mbstring php-pdo php-mysqlnd php-opcache php-xml php-gd php-curl php-zip httpd librdkafka-devel php-pear php-devel gcc make && \
    pecl install rdkafka && \
    echo "extension=rdkafka.so" > /etc/php.d/50-rdkafka.ini

# ğŸ“¦ Install other dependencies for Kafka
RUN yum install -y curl zip unzip libpng-devel zlib-devel libxml2-devel libzip-devel libonig-devel && \
    yum clean all

# ğŸ‘¥ Create Apache user and group
RUN groupadd -r www-data && useradd -r -g www-data www-data

# âš™ï¸ Enable Apache modules
RUN sed -i 's/^#LoadModule rewrite_module/LoadModule rewrite_module/' /etc/httpd/conf.modules.d/00-base.conf && \
    sed -i 's/^#LoadModule negotiation_module/LoadModule negotiation_module/' /etc/httpd/conf.modules.d/00-base.conf

# ğŸ“ Redirect Apache logs to stdout and stderr
# RUN ln -sf /dev/stdout /var/log/httpd/access_log && \
#     ln -sf /dev/stderr /var/log/httpd/error_log

# ğŸ”„ Update laravel-kafka-logger version
RUN composer require hhxsv5/laravel-kafka-logger:^1.0

# ğŸ“‚ Copy your custom httpd.conf file to the container
COPY httpd.conf /etc/httpd/conf/httpd.conf

# ğŸ¢ Set working directory
WORKDIR /var/www/html

# ğŸ“‚ Copy the application files to the working directory
COPY . /var/www/html/

# ğŸ“‚ Copy env
#COPY .env.example .env

# ğŸ”’ Set permissions for the PID file and directory
RUN chown -R www-data:www-data /var/www/html /run/httpd

# ğŸ§¹ Remove existing Apache PID file if it exists
RUN rm -f /run/httpd/httpd.pid

# âŒ Check for and kill existing Apache processes
RUN pkill httpd || true

# ğŸ”’ Set permissions for the log directory and error log file
RUN chown -R www-data:www-data /var/log/httpd
RUN touch /var/log/httpd/error_log
RUN chown www-data:www-data /var/log/httpd/error_log

# ğŸ“¦ Install all PHP dependencies
RUN composer install

# ğŸ”‘ Key generate command
RUN php artisan key:generate --no-interaction

# ğŸ”‘ List of credentials
#RUN php artisan app:creds --list

# ğŸ”’ Set permissions for the Laravel storage folder
RUN chmod -R 777 /var/www/html/storage
RUN chmod -R 777 /var/www/html/bootstrap/cache

# ğŸ‘¥ Set the user to run as Apache user
USER www-data

# ğŸŒ Expose the port Apache is reachable on
EXPOSE 8001

# ğŸš€ Start Apache service
CMD ["/usr/sbin/httpd", "-D", "FOREGROUND"]
```

> These Dockerfiles are examples of how to create Docker images for different environments, using various features and best practices. They demonstrate the use of environment variables, multi-stage builds, security practices by switching to non-root users, and exposing necessary ports for web services.